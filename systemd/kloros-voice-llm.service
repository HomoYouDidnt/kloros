[Unit]
Description=KLoROS Voice LLM Integration Zooid - Unified LLM adapter with remote/local fallback
Documentation=file:///home/kloros/docs/plans/2025-11-23-voice-zooid-refactoring-design.md
After=network.target kloros-chem-proxy.service
Requires=kloros-chem-proxy.service
PartOf=kloros-voice.service

[Service]
Type=simple
User=kloros
Group=kloros
WorkingDirectory=/home/kloros

Environment=PYTHONPATH=/home/kloros/src:/home/kloros
Environment=KLR_ENABLE_LLM=1
Environment=KLR_OLLAMA_MODEL=main
Environment=KLR_OLLAMA_URL=http://localhost:11434
Environment=KLR_REMOTE_LLM_MODEL=qwen2.5:72b
Environment=KLR_DASHBOARD_URL=http://localhost:5002
Environment=KLR_REMOTE_LLM_TIMEOUT=120
Environment=KLR_LOCAL_LLM_TIMEOUT=60
Environment=KLR_LLM_MAX_RETRIES=1

ExecStart=/home/kloros/.venv/bin/python3 -u /home/kloros/src/kloros_voice_llm.py

Restart=always
RestartSec=5

MemoryMax=2G
CPUQuota=100%

StandardOutput=journal
StandardError=journal
SyslogIdentifier=kloros-voice-llm

[Install]
WantedBy=multi-user.target
