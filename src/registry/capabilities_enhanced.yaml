- key: audio.input
  kind: device
  provides:
  - mic_stream
  - levels
  - vad
  preconditions:
  - group:audio
  - path:/dev/snd readable
  - pipewire_session
  health_check: bash:pactl list short sources | grep -v monitor | grep -q .
  cost:
    cpu: 1
    mem: 64
    risk: low
  tests:
  - audio_probe_basic
  docs: docs/audio.md
  enabled: true
- key: audio.output
  kind: device
  provides:
  - tts_playback
  - beep
  - audio_feedback
  preconditions:
  - group:audio
  - path:/dev/snd readable
  - pipewire_session
  health_check: pactl list short sinks
  cost:
    cpu: 1
    mem: 64
    risk: low
  tests:
  - audio_playback_test
  docs: docs/audio.md
  enabled: true
- key: memory.sqlite
  kind: storage
  provides:
  - kv_write
  - kv_read
  - events_log
  preconditions:
  - path:/home/kloros/.kloros/memory.db rw
  health_check: python:pragma_quick_check
  cost:
    cpu: 1
    mem: 32
    risk: low
  tests:
  - sqlite_quickcheck
  - wal_checkpoint
  docs: docs/memory.md
  enabled: true
- key: memory.chroma
  kind: storage
  provides:
  - vector_search
  - semantic_memory
  - episodic_recall
  preconditions:
  - path:/home/kloros/.kloros/chroma_data rw
  - module:chromadb importable
  health_check: python:chroma_collection_count
  cost:
    cpu: 5
    mem: 512
    risk: low
  tests:
  - chroma_embedding_test
  - chroma_query_test
  docs: docs/memory.md
  enabled: true
- key: rag.retrieval
  kind: service
  provides:
  - context_retrieval
  - document_search
  - semantic_qa
  preconditions:
  - path:/home/kloros/rag_data/rag_store.npz readable
  - module:sentence_transformers importable
  health_check: python:rag_document_count
  cost:
    cpu: 10
    mem: 1024
    risk: low
  tests:
  - rag_retrieval_test
  - rag_embedding_test
  docs: docs/rag.md
  enabled: true
- key: stt.vosk
  kind: service
  provides:
  - transcribe_live
  - speech_recognition
  preconditions:
  - path:/home/kloros/models/vosk/model readable
  - module:vosk importable
  - audio.input:ok
  health_check: python:vosk_model_loaded
  cost:
    cpu: 15
    mem: 512
    risk: low
  tests:
  - stt_transcribe_test
  docs: docs/stt.md
  enabled: true
- key: tts.piper
  kind: service
  provides:
  - text_to_speech
  - voice_synthesis
  preconditions:
  - path:/home/kloros/models/piper/glados_piper_medium.onnx readable
  - command:piper available
  - audio.output:ok
  health_check: command:which piper
  cost:
    cpu: 20
    mem: 256
    risk: low
  tests:
  - tts_synthesis_test
  docs: docs/tts.md
  enabled: true
- key: llm.ollama
  kind: service
  provides:
  - generate_response
  - reasoning
  - planning
  preconditions:
  - http:http://127.0.0.1:11434/api/tags reachable
  health_check: http:http://127.0.0.1:11434/api/tags
  cost:
    cpu: 50
    mem: 8192
    risk: medium
  tests:
  - ollama_generate_test
  docs: docs/llm.md
  enabled: true
- key: dream.evolution
  kind: service
  provides:
  - optimize_params
  - self_improve
  - experiment
  preconditions:
  - path:/home/kloros/src/dream/config/dream.yaml readable
  - path:/home/kloros/src/dream/dream_domain_service.py readable
  health_check: python:dream_availability_check
  cost:
    cpu: 25
    mem: 2048
    risk: medium
  tests:
  - dream_cycle_test
  docs: docs/dream.md
  enabled: true
- key: tools.synthesis
  kind: service
  provides:
  - create_tool
  - evolve_tool
  - validate_tool
  preconditions:
  - path:/home/kloros/.kloros/synthesized_tools/tools.db rw
  - llm.ollama:ok
  health_check: python:tool_synthesis_quota_check
  cost:
    cpu: 30
    mem: 1024
    risk: medium
  tests:
  - tool_synthesis_test
  docs: docs/tool_synthesis.md
  enabled: true
- key: tools.introspection
  kind: tool
  provides:
  - system_diagnostic
  - component_status
  - self_query
  preconditions:
  - path:/home/kloros/src/introspection_tools.py readable
  health_check: python:introspection_tool_count
  cost:
    cpu: 2
    mem: 64
    risk: low
  tests:
  - introspection_registry_test
  docs: docs/introspection.md
  enabled: true
- key: agent.browser
  kind: tool
  provides:
  - web_navigate
  - extract_content
  - web_automation
  preconditions:
  - module:playwright importable
  - path:/home/kloros/.venv/bin/playwright executable
  health_check: python:playwright_browser_check
  cost:
    cpu: 20
    mem: 512
    risk: medium
  tests:
  - browser_agent_test
  docs: docs/browser_agent.md
  enabled: true
- key: agent.dev
  kind: tool
  provides:
  - code_execution
  - safe_sandbox
  - diff_generation
  preconditions:
  - path:/home/kloros/src/dev_agent exists
  - path:/home/kloros/src/dev_agent/security/policy.yaml readable
  health_check: python:dev_agent_check
  cost:
    cpu: 10
    mem: 512
    risk: medium
  tests:
  - dev_sandbox_test
  docs: docs/dev_agent.md
  enabled: true
- key: xai.tracing
  kind: service
  provides:
  - explain_decision
  - log_reasoning
  - trace_causality
  preconditions:
  - path:/var/log/kloros/structured.jsonl writable
  health_check: bash:test -w /var/log/kloros/structured.jsonl
  cost:
    cpu: 3
    mem: 128
    risk: low
  tests:
  - xai_trace_test
  docs: docs/xai.md
  enabled: true
- key: network.http_out
  kind: device
  provides:
  - fetch_docs
  - post_webhook
  - api_call
  preconditions:
  - network:internet reachable
  health_check: http:https://api.github.com
  cost:
    cpu: 2
    mem: 64
    risk: medium
  tests:
  - network_connectivity_test
  docs: docs/network.md
  enabled: true
- key: reasoning.curiosity
  kind: reasoning
  provides:
  - generate_questions
  - propose_experiments
  - self_directed_learning
  preconditions:
  - env:KLR_ENABLE_CURIOSITY=1
  - tools.introspection:ok
  health_check: env:KLR_ENABLE_CURIOSITY
  cost:
    cpu: 5
    mem: 256
    risk: low
  tests:
  - curiosity_question_generation_test
  docs: docs/curiosity.md
  enabled: true
- key: reasoning.autonomy
  kind: reasoning
  provides:
  - propose_improvement
  - safe_action
  - self_heal
  preconditions:
  - env:KLR_AUTONOMY_LEVEL>=2
  - reasoning.curiosity:ok
  health_check: env:KLR_AUTONOMY_LEVEL
  cost:
    cpu: 10
    mem: 512
    risk: medium
  tests:
  - autonomy_level_test
  docs: docs/autonomy.md
  enabled: true
- key: module.tool_synthesis
  kind: tool
  provides:
  - create_tool
  - evolve_tool
  - validate_tool
  - code_generation
  - templating
  - processing_engine
  - validation
  - data_persistence
  preconditions:
  - path:/home/kloros/src/tool_synthesis/__init__.py readable
  health_check: bash:test -f /home/kloros/src/tool_synthesis/__init__.py
  cost:
    cpu: 5
    mem: 256
    risk: low
  tests: []
  docs: src/tool_synthesis/README.md
  enabled: true
  discovered_by: curiosity_system
  discovery_timestamp: '2025-10-30T19:11:31.669461'
- key: module.config
  kind: service
  provides:
  - configuration
  - settings_management
  preconditions:
  - path:/home/kloros/src/config/__init__.py readable
  health_check: bash:test -f /home/kloros/src/config/__init__.py
  cost:
    cpu: 5
    mem: 256
    risk: low
  tests: []
  docs: src/config/README.md
  enabled: true
  discovered_by: curiosity_system
  discovery_timestamp: '2025-10-31T11:41:03.723390'
- key: module.common
  kind: service
  provides:
  - utility_functions
  preconditions:
  - path:/home/kloros/src/common/__init__.py readable
  health_check: bash:test -f /home/kloros/src/common/__init__.py
  cost:
    cpu: 5
    mem: 256
    risk: low
  tests: []
  docs: src/common/README.md
  enabled: true
  discovered_by: curiosity_system
  discovery_timestamp: '2025-11-09T19:25:54.460600'
- key: module.uncertainty
  kind: service
  provides:
  - utility_functions
  preconditions:
  - path:/home/kloros/src/uncertainty/__init__.py readable
  health_check: bash:test -f /home/kloros/src/uncertainty/__init__.py
  cost:
    cpu: 5
    mem: 256
    risk: low
  tests: []
  docs: src/uncertainty/README.md
  enabled: true
  discovered_by: curiosity_system
  discovery_timestamp: '2025-11-09T19:39:14.778977'
- key: module.dream_lab
  kind: service
  provides:
  - utility_functions
  preconditions:
  - path:/home/kloros/src/dream_lab/__init__.py readable
  health_check: bash:test -f /home/kloros/src/dream_lab/__init__.py
  cost:
    cpu: 5
    mem: 256
    risk: low
  tests: []
  docs: src/dream_lab/README.md
  enabled: true
  discovered_by: curiosity_system
  discovery_timestamp: '2025-11-09T19:56:45.264905'
- key: module.governance
  kind: service
  provides:
  - utility_functions
  preconditions:
  - path:/home/kloros/src/governance/__init__.py readable
  health_check: bash:test -f /home/kloros/src/governance/__init__.py
  cost:
    cpu: 5
    mem: 256
    risk: low
  tests: []
  docs: src/governance/README.md
  enabled: true
  discovered_by: curiosity_system
  discovery_timestamp: '2025-11-09T20:09:29.249614'
- key: module.toolforge
  kind: tool
  provides:
  - create_tool
  - evolve_tool
  - validate_tool
  - code_generation
  preconditions:
  - path:/home/kloros/src/toolforge/__init__.py readable
  health_check: bash:test -f /home/kloros/src/toolforge/__init__.py
  cost:
    cpu: 5
    mem: 256
    risk: low
  tests: []
  docs: src/toolforge/README.md
  enabled: true
  discovered_by: curiosity_system
  discovery_timestamp: '2025-11-09T20:24:19.244963'
- key: module.idle_reflection
  kind: service
  provides:
  - code_generation
  preconditions:
  - path:/home/kloros/src/idle_reflection/__init__.py readable
  health_check: bash:test -f /home/kloros/src/idle_reflection/__init__.py
  cost:
    cpu: 5
    mem: 256
    risk: low
  tests: []
  docs: src/idle_reflection/README.md
  enabled: true
  discovered_by: curiosity_system
  discovery_timestamp: '2025-11-09T22:43:20.213981'
- key: module.meta_cognition
  kind: service
  provides:
  - utility_functions
  preconditions:
  - path:/home/kloros/src/meta_cognition/__init__.py readable
  health_check: bash:test -f /home/kloros/src/meta_cognition/__init__.py
  cost:
    cpu: 5
    mem: 256
    risk: low
  tests: []
  docs: src/meta_cognition/README.md
  enabled: true
  discovered_by: curiosity_system
  discovery_timestamp: '2025-11-10T15:46:51.607071'
- key: module.self_heal
  kind: service
  provides:
  - processing_engine
  preconditions:
  - path:/home/kloros/src/self_heal/__init__.py readable
  health_check: bash:test -f /home/kloros/src/self_heal/__init__.py
  cost:
    cpu: 5
    mem: 256
    risk: low
  tests: []
  docs: src/self_heal/README.md
  enabled: true
  discovered_by: curiosity_system
  discovery_timestamp: '2025-11-10T16:42:31.987964'
- key: module.middleware
  kind: service
  provides:
  - utility_functions
  preconditions:
  - path:/home/kloros/src/middleware/__init__.py readable
  health_check: bash:test -f /home/kloros/src/middleware/__init__.py
  cost:
    cpu: 5
    mem: 256
    risk: low
  tests: []
  docs: src/middleware/README.md
  enabled: true
  discovered_by: curiosity_system
  discovery_timestamp: '2025-11-10T16:57:36.975070'
- key: module.introspection
  kind: service
  provides:
  - utility_functions
  preconditions:
  - path:/home/kloros/src/introspection/__init__.py readable
  health_check: bash:test -f /home/kloros/src/introspection/__init__.py
  cost:
    cpu: 5
    mem: 256
    risk: low
  tests: []
  docs: src/introspection/README.md
  enabled: true
  discovered_by: curiosity_system
  discovery_timestamp: '2025-11-10T17:12:32.961048'
- key: module.style
  kind: service
  provides:
  - processing_engine
  preconditions:
  - path:/home/kloros/src/style/__init__.py readable
  health_check: bash:test -f /home/kloros/src/style/__init__.py
  cost:
    cpu: 5
    mem: 256
    risk: low
  tests: []
  docs: src/style/README.md
  enabled: true
  discovered_by: curiosity_system
  discovery_timestamp: '2025-11-10T17:27:33.001774'
- key: module.heuristics
  kind: service
  provides:
  - utility_functions
  preconditions:
  - path:/home/kloros/src/heuristics/__init__.py readable
  health_check: bash:test -f /home/kloros/src/heuristics/__init__.py
  cost:
    cpu: 5
    mem: 256
    risk: low
  tests: []
  docs: src/heuristics/README.md
  enabled: true
  discovered_by: curiosity_system
  discovery_timestamp: '2025-11-10T17:42:32.254876'
- key: module.cognition
  kind: service
  provides:
  - processing_engine
  preconditions:
  - path:/home/kloros/src/cognition/__init__.py readable
  health_check: bash:test -f /home/kloros/src/cognition/__init__.py
  cost:
    cpu: 5
    mem: 256
    risk: low
  tests: []
  docs: src/cognition/README.md
  enabled: true
  discovered_by: curiosity_system
  discovery_timestamp: '2025-11-10T17:57:32.458424'
- key: module.routing
  kind: service
  provides:
  - utility_functions
  preconditions:
  - path:/home/kloros/src/routing/__init__.py readable
  health_check: bash:test -f /home/kloros/src/routing/__init__.py
  cost:
    cpu: 5
    mem: 256
    risk: low
  tests: []
  docs: src/routing/README.md
  enabled: true
  discovered_by: curiosity_system
  discovery_timestamp: '2025-11-14T15:36:49.294580'
- key: module.logic
  kind: service
  provides:
  - utility_functions
  preconditions:
  - path:/home/kloros/src/logic/__init__.py readable
  health_check: bash:test -f /home/kloros/src/logic/__init__.py
  cost:
    cpu: 5
    mem: 256
    risk: low
  tests: []
  docs: src/logic/README.md
  enabled: true
  discovered_by: curiosity_system
  discovery_timestamp: '2025-11-14T16:06:49.820769'
- key: module.ux
  kind: service
  provides:
  - utility_functions
  preconditions:
  - path:/home/kloros/src/ux/__init__.py readable
  health_check: bash:test -f /home/kloros/src/ux/__init__.py
  cost:
    cpu: 5
    mem: 256
    risk: low
  tests: []
  docs: src/ux/README.md
  enabled: true
  discovered_by: curiosity_system
  discovery_timestamp: '2025-11-14T16:36:53.404869'
