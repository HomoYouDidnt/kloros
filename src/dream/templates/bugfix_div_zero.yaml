# Bugfix template: division by zero protection
family: bugfix.core

# Payload defines what should change
payload:
  type: symbol_rename
  symbols:
    old: divide
    new: safe_divide
  description: "Rename 'divide' to 'safe_divide' and add zero-check"

# Slots for TestForge randomization (CRITICAL: TestForge expects this!)
slots:
  symbol_pairs:
    - ["divide", "safe_divide"]

# Base constraints (can be shaped by fitness shaper)
base:
  diff_limit: 60
  max_files_changed: 6
  preserve_api: true
  timeout_s: 60
  context_lines: 3

# Mutators that can modify constraints
mutators:
  - type: stricter_diff
    trigger: last_passed_false
    action: reduce_diff_limit
    factor: 0.8
  - type: relax_diff
    trigger: last_passed_true
    action: increase_diff_limit
    factor: 1.2

# Expected outcome for fitness scoring
expected:
  tests_pass: true
  no_crashes: true
  diff_reasonable: true
