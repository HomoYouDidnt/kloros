# D-REAM Phase 2: Safety Caps per Domain
version: 2
description: "Hard safety limits for candidate evaluation"

domains:
  cpu:
    temp_peak_c: 90
    package_power_w: 200
    thermal_throttle_events: 0
    errors: 0
    oom: 0
    
  gpu:
    temp_peak_c: 83
    power_draw_w: 280
    memory_errors: 0
    thermal_throttle_events: 0
    oom: 0
    
  audio:
    temp_peak_c: 75
    xruns: 10
    buffer_underruns: 5
    errors: 0
    
  memory:
    temp_peak_c: 60  # DIMM temperature
    ecc_errors: 0
    oom: 0
    swap_thrashing_mb_per_s: 100
    
  storage:
    temp_peak_c: 70  # NVMe temperature
    io_errors: 0
    write_error_rate: 0
    
  asr_tts:
    temp_peak_c: 85  # CPU temp during ASR/TTS
    recognition_failures: 5
    synthesis_failures: 5
    errors: 0
    
  power_thermal:
    cpu_temp_c: 90
    gpu_temp_c: 83
    dimm_temp_c: 60
    nvme_temp_c: 70
    psu_temp_c: 60
    total_power_w: 500
    
  os_scheduler:
    cpu_temp_c: 90
    load_average_1m: 32  # 2x CPU count
    oom: 0
    
  conversation:
    cpu_temp_c: 90
    gpu_temp_c: 83
    llm_errors: 0
    tts_errors: 0

# Global limits
global:
  max_trial_failures: 3  # Mark unsafe if >3 trials fail
  max_trial_duration_seconds: 300  # Kill runaway trials
  min_successful_trials: 7  # Need at least 7/10 successful

# Tolerance for "improvements"
tolerance:
  perf_improvement_pct: 0.5  # Need >0.5% improvement
  latency_regression_pct: 5.0  # Allow ≤5% latency increase
  power_regression_pct: 3.0  # Allow ≤3% power increase
