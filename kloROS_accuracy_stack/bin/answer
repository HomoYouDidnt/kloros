#!/usr/bin/env bash
set -euo pipefail
QUESTION=""
CONFIG="config/accuracy.yml"
TRACE="out/trace.json"
MODE="e2e"
while [[ $# -gt 0 ]]; do
  case "$1" in
    --question) QUESTION="$2"; shift 2;;
    --config) CONFIG="$2"; shift 2;;
    --trace) TRACE="$2"; shift 2;;
    --mode) MODE="$2"; shift 2;;
    *) echo "Unknown arg: $1"; exit 1;;
  esac
done
mkdir -p "$(dirname "$TRACE")"
python -m pipeline.qa --question "$QUESTION" --config "$CONFIG" --trace "$TRACE" --mode "$MODE"
